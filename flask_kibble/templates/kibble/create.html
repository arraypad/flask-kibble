{% extends "kibble/base.html" %}

{% from "kibble/macros/render_form.html" import render_form %}
{% from "kibble/macros/action_button.html" import action_link, view_label %}

{% block page_header %}New {{ view_label(view) }}{% endblock %}

{% block header_buttons %}
    <div class='pull-right'>
        {% for action in view._linked_actions if not action._requires_instance %}
            {% if action.has_permission_for() %}
                {{ action_link(action, from=view) }}
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}

{% block body %}
    <div class='row'>
        <form role='form' class='form-horizontal' method='POST' action='{{ request.url }}'>
            {% block form_body %}
                {{ render_form(form, fieldsets) }}
            {% endblock %}

            {% block form_actions %}
                <div class='form-group'>
                    <div class='col-sm-offset-2 col-sm-10'>
                        <button type='submit' class='btn btn-default'>Save</button>
                        <button type='submit' name='__continue' value='edit' class='btn btn-default'>
                            Save and continue editing
                        </button>
                    </div>
                </div>
            {% endblock %}
        </form>
    </div>
{% endblock %}
